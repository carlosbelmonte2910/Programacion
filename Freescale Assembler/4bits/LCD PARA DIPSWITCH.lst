
LCD PARA DIPSWITCH.asm   Assembled with CASM08Z  10/04/2014  06:00:11 p.m.  
                                                                         PAGE 1



 0000                   1  RAM_START  EQU  $0080
 0000                   2  ROM_START  EQU  $EE00
 0000                   3  VECTORS    EQU  $FFDE
 0000                   4  E          EQU   5
 0000                   5  RS         EQU   4
 0000                   6  IN_1       EQU   0
 0000                   7  IN_2       EQU   1
 0000                   8  IN_3       EQU   2
 0000                   9  IN_4       EQU   3
                       10  
 0000                  11  $BASE 10T
 0000                  12  $include   'QTQY_Registers.inc'
                       13  ;***************************************************
                                                    ***************************
                       14  ;                    QTQY_REGISTERS.INC - ARCHIVO 
                                                                        INCLUDE
                       15  ; Contiene las Definiciones de los Registros del 
                                                       MC68HC908QTA/QYA/8/4/2/1
                       16  ;
                       17  ;                    SyHDe - Soft y Hard Desarrollos
                       18  ;***************************************************
                                                    ***************************
                       19  
                       20  ;***************************************************
                                                    ***************************
                       21  ;---------------REGISTROS DE PUERTOS ENT/SAL--------
                                                    ---------------------------
                       22  ;---------------PUERTO A----------------------------
                                                    ---------------------------
 0000                  23  PTA  EQU     $0000   ; Port A Data register
 0000                  24  PORTA        EQU     $0000   ; "
 0000                  25  DDRA EQU     $0004   ; Port A Data Direction 
                                                                       Register
 0000                  26  PTAPUE  EQU  $000B   ; Port A Pull Ups Enable
                       27  
                       28  ;---------------PUERTO B----------------------------
                                                    ---------------------------
 0000                  29  PTB  EQU     $0001   ; Port B Data register
 0000                  30  PORTB        EQU     $0001   ; "
 0000                  31  DDRB EQU     $0005   ; Port B Data Direction 
                                                                       Register
 0000                  32  PTBPUE  EQU  $000C   ; Port B Pull Ups Enable
                       33  
                       34  ;***************************************************
                                                    ***************************
                       35  ;---------------REGISTROS DEL MODULO KEYBOARD-------
                                                    ---------------------------
 0000                  36  KBSCR        EQU     $001A   ; Keyboard Status & 
                                                               Control register
 0000                  37  keyf equ     3       ;
 0000                  38  ackk equ     2       ;
 0000                  39  imaskk       equ     1       ;
 0000                  40  modek        equ     0       ;
                       41  
 0000                  42  KBIER        EQU     $001B   ; Keyboard interrupt 
                                                                enable register
                       43  


LCD PARA DIPSWITCH.asm   Assembled with CASM08Z  10/04/2014  06:00:11 p.m.  PAGE 2



                       44  ;***************************************************
                                                    ***************************
                       45  ;---------------REGISTROS DE INTERRUPCION EXTERNA 
                                                  1----------------------------
 0000                  46  INTSCR       EQU     $001D   ; IRQ Status & Control 
                                                                       Register
 0000                  47  irqf equ     3       ;
 0000                  48  ack  equ     2       ;
 0000                  49  imask        equ     1       ;
 0000                  50  mode equ     0       ;
                       51  
                       52  ;***************************************************
                                                    ***************************
                       53  ;---------------REGISTROS DE CONFIGURACION----------
                                                    ---------------------------
 0000                  54  CONFIG1      EQU     $001F   ; Configuration 
                                                                     Register 1
                       55  
 0000                  56  CONFIG2      EQU     $001E   ; Configuration 
                                                                     Register 2
                       57  
                       58  ;***************************************************
                                                    ***************************
                       59  ;---------------REGISTROS DEL TIMER ----------------
                                                    ---------------------------
 0000                  60  TSC  EQU     $0020   ; Timer Status & Control 
                                                                       Register
 0000                  61  tof  equ     7       ;
 0000                  62  toie equ     6       ;
 0000                  63  tstop        equ     5       ;
 0000                  64  trst equ     4       ;
                       65  
 0000                  66  TCNTH        EQU     $0021   ; Timer Counter 
                                                                  Register High
 0000                  67  TCNTL        EQU     $0022   ; Timer Counter 
                                                                   Register Low
 0000                  68  TMODH        EQU     $0023   ; Timer Counter Modulo 
                                                                  Register High
 0000                  69  TMODL        EQU     $0024   ; Timer Counter Modulo 
                                                                   Register Low
                       70  
 0000                  71  TSC0 EQU     $0025   ; Timer Channel 0 Status & 
                                                               Control Register
 0000                  72  ch0f equ     7
 0000                  73  ch0ie        equ     6       ;
 0000                  74  ms0b equ     5       ;
 0000                  75  ms0a equ     4       ;
 0000                  76  els0b        equ     3       ;
 0000                  77  els0a        equ     2       ;
 0000                  78  tov0 equ     1       ;
 0000                  79  ch0max       equ     0       ;
                       80  
 0000                  81  TCH0H        EQU     $0026   ; Timer Channel 0 
                                                                  Register High
 0000                  82  TCH0L        EQU     $0027   ; Timer Channel 0 
                                                                   Register Low
                       83  
 0000                  84  TSC1 EQU     $0028   ; Timer Channel 1 Status & 


LCD PARA DIPSWITCH.asm   Assembled with CASM08Z  10/04/2014  06:00:11 p.m.  PAGE 3



                                                               Control Register
 0000                  85  ch1f equ     7
 0000                  86  ch1ie        equ     6       ;
 0000                  87  ms1b equ     5       ;
 0000                  88  ms1a equ     4       ;
 0000                  89  els1b        equ     3       ;
 0000                  90  els1a        equ     2       ;
 0000                  91  tov1 equ     1       ;
 0000                  92  ch1max       equ     0       ;
                       93  
 0000                  94  TCH1H        EQU     $0029   ; Timer Channel 1 
                                                                  Register High
 0000                  95  TCH1L        EQU     $002A   ; Timer Channel 1 
                                                                   Register Low
                       96  
                       97  ;***************************************************
                                                    ***************************
                       98  ;---------------REGISTROS DEL OSCILADOR-------------
                                                    ---------------------------
 0000                  99  OSCSC        EQU     $0036   ;Oscillator Status and 
                                                               Control Register
 0000                 100  ecgst        equ     0       ;Read Only!!!!
 0000                 101  ecgon        equ     1       ;
 0000                 102  ecfs0        equ     2       ;
 0000                 103  ecfs1        equ     3       ;
 0000                 104  icfs0        equ     4       ;
 0000                 105  icfs1        equ     5       ;
 0000                 106  oscopt0      equ     6       ;
 0000                 107  oscopt1      equ     7       ;
                      108  
 0000                 109  OSCTRIM      EQU     $0038   ;Oscillator Trim 
                                                                       Register
                      110  
 0000                 111  OSCSTAT EQU  $0036   ;Oscillator Status and Control 
                                                         (No Vers A Solo QY/QT)
                      112  
                      113  ;***************************************************
                                                    ***************************
                      114  ;---------------REGISTROS DEL ADC-------------------
                                                    ---------------------------
 0000                 115  ADSCR        EQU     $003C   ; ADC Status & Control 
                                                                       Register
 0000                 116  coco equ     7       ;
 0000                 117  aien equ     6       ;
 0000                 118  adco equ     5       ;
                      119  
 0000                 120  ADRH EQU     $003D   ; ADC10 Data Register High
 0000                 121  ADRL EQU     $003E   ; ADC10 Data Register Low
 0000                 122  ADICLK       EQU     $003F   ; ADC10 Clock Control 
                                                                       Register
                      123  
                      124  ;***************************************************
                                                    ***************************
                      125  ;---------------REGISTROS DEL MODULO SIM------------
                                                    ---------------------------
 0000                 126  BSR  EQU     $FE00   ; Break Status Register
 0000                 127  sbsw equ     1       ; break wait bit
                      128  


LCD PARA DIPSWITCH.asm   Assembled with CASM08Z  10/04/2014  06:00:11 p.m.  PAGE 4



 0000                 129  SRSR EQU     $FE01   ; SIM Reset Status Register
 0000                 130  por  equ     7       ;
 0000                 131  pin  equ     6       ;
 0000                 132  cop  equ     5       ;
 0000                 133  ilop equ     4       ;
 0000                 134  ilad equ     3       ;
 0000                 135  modrst       equ     2       ;
 0000                 136  lvi  equ     1       ;
                      137  
 0000                 138  BRKAR        EQU     $FE02   ; Break Auxiliary 
                                                                       Register
 0000                 139  bdcop        equ     0
                      140  
 0000                 141  BFCR EQU     $FE03   ; Break Flag Control Register
 0000                 142  bcfe equ     7       ;
                      143  
 0000                 144  INT1 EQU     $FE04   ; Interrupt Status Register 1
                      145  
 0000                 146  INT2 EQU     $FE05   ; Interrupt Status Register 2
                      147  
 0000                 148  INT3 EQU     $FE06   ; Interrupt Status Register 3
                      149  
                      150  ;***************************************************
                                                    ***************************
                      151  ;---------------REGISTROS DE LA MEMORIA FLASH-------
                                                    ---------------------------
 0000                 152  FLCR EQU     $FE08   ; FLASH Control Register
                      153  
 0000                 154  FLBPR        EQU     $FFBE   ; FLASH Block Protect
                      155  
                      156  ;***************************************************
                                                    ***************************
                      157  ;---------------REGISTROS DEL MODULO BREAK----------
                                                     --------------------------
 0000                 158  BRKH EQU     $FE09   ; Break address Hig Register
                      159  
 0000                 160  BRKL EQU     $FE0A   ; Break Address Low Register
                      161  
 0000                 162  BRKSCR       EQU     $FE0B   ; Break Status & 
                                                               Control Register
                      163  
                      164  ;***************************************************
                                                    ***************************
                      165  ;---------------REGISTROS DEL MODULO LVI------------
                                                    ---------------------------
 0000                 166  LVISR        EQU     $FE0C   ; LVI Status Register
                      167  
                      168  ;***************************************************
                                                    ***************************
                      169  ;---------------REGISTROS DEL MODULO OSCILLATOR-----
                                                    ---------------------------
 0000                 170  IOSCTRM EQU  $FFC0   ; Internal Oscillator Trim 
                                                  (Factory Prog Value Optional)
                      171  
                      172  ;***************************************************
                                                    ***************************
                      173  ;---------------REGISTROS DEL MODULO COP WATCHDOG---
                                                    ---------------------------


LCD PARA DIPSWITCH.asm   Assembled with CASM08Z  10/04/2014  06:00:11 p.m.  PAGE 5



 0000                 174  COPCTL       EQU     $FFFF   ; COP Control Register
                      175  
                      176  ;***************************************************
                                                    ***************************
                      177  ;***************************************************
                                                    ***************************
                      178  ; RUTINAS DE MANEJO DE LA MEMORIA FLASH SITUADAS EN 
                                                    LA ROM MONITOR (HC908QTQYx)
                      179  ;***************************************************
                                                    ***************************
                      180  
 0000                 181  PRGRNGE              EQU     $2809   ;Programa un 
                                                  rango de direcciones de Flash
 0000                 182  ERARNGE              EQU     $2806   ;Borra una 
                                                        pagina de Memoria Flash
 0000                 183  GETBYTE              EQU     $2800   ;Recibe un 
                                              Byte en Modo Monitordesde el Port
 0000                 184  RDVRRNG              EQU     $2803   ;Usa un Rango 
                                               de la Flash y lo envia x el Port
 0000                 185  DELNUS               EQU     $280C   ;Rutina de 
                                                  Demora (usa parametros[A][X])
                      186  
                      187  ;***************************************************
                                                    ***************************
                      188  ;       SyHDe - Soft y Hard Desarrollos, 2000  - 
                                                          Derechos Reservados -
                      189  ; Ud.uede usar este archivo gratuitamente mientras 
                                                     incluya este pie de pagina
                      190  ;***************************************************
                                                    ***************************
                      191  
                      192  
                      193  ***********VARIABLES DE RAM**********
 0080                 194             ORG  RAM_START
 0080                 195  CHAR       RMB  1
                      196  ****************************************************
                             **************************************************
                                                           ********************
 EE00                 197             ORG  ROM_START
                      198  START:
 EE00 [03] 3F36       199             CLR  OSCSC        ; Oscilador interno a 
                                                                          4 MHz
 EE02 [01] 9C         200             RSP          ;INICIALIZACION DEL 
                                                               MICROCONTROLADOR
 EE03 [01] 4F         201             CLRA
 EE04 [01] 8C         202             CLRH
 EE05 [01] 5F         203             CLRX
 EE06 [01] 98         204             CLC
                      205  
 EE07 [04] 6E091F     206             MOV  #%00001001,CONFIG1   ;PROGRAMACION 
                                                                 DE LOS CONFIGS
 EE0A [01] 9D         207             NOP
 EE0B [01] 9D         208             NOP
 EE0C [04] 6E801E     209             MOV  #%10000000,CONFIG2
 EE0F [01] 9D         210             NOP
 EE10 [01] 9D         211             NOP
                      212  
 EE11 [04] 6EFF05     213             MOV  #$FF,DDRB             ;PUERTO B 


LCD PARA DIPSWITCH.asm   Assembled with CASM08Z  10/04/2014  06:00:11 p.m.  PAGE 6



                                                               TODO COMO SALIDA
 EE14 [04] 6E3004     214             MOV  #%00110000,DDRA       ;PTA5, PTA4 Y 
                              PTA3 SON SALIIDAS. PTA2, PTA1 Y PTA0 SON ENTRADAS
                      215  
                      216  
 EE17 [03] 3F00       217             CLR  PTA
 EE19 [03] 3F01       218             CLR  PTB
 EE1B [05] CDF0EF     219             JSR  RETARDO
                      220  
                      221  
                      222  ****************************************************
                             **************************************************
                                                           ********************
                      223  INICIO_LCD:                           ;PREPARA AL 
                                                    MODULO LCD PARA MODO 8 BITS
 EE1E [02] A628       224             LDA  #%00101000
 EE20 [05] CDEE69     225             JSR  ESCRIBE_IR
 EE23 [02] A60E       226             LDA  #%00001110
 EE25 [05] CDEE69     227             JSR  ESCRIBE_IR
 EE28 [02] A601       228             LDA  #%00000001
 EE2A [05] CDEE69     229             JSR  ESCRIBE_IR
 EE2D [02] A606       230             LDA  #%00000110
 EE2F [05] CDEE69     231             JSR  ESCRIBE_IR
 EE32 [02] A640       232             LDA  #%01000000
 EE34 [05] CDEE69     233             JSR  ESCRIBE_IR
 EE37 [02] A60C       234             LDA  #%00001100
 EE39 [05] CDEE69     235             JSR  ESCRIBE_IR
                      236  ****************************************************
                             **************************************************
                                                           ********************
                      237  SALUDO:
                      238             ;LDA  #$01                 ;CLEAR DISPLAY
                      239             ;JSR  ESCRIBE_IR
 EE3C [02] A60C       240             LDA  #$0C                 ;DISPLAY ON
 EE3E [05] CDEE69     241             JSR  ESCRIBE_IR
                      242  
 EE41 [02] A680       243             LDA  #%10000000           ;SET DDRAM 
                                     $00. Va a la posicion 0 de la primera fila
 EE43 [05] CDEEBD     244             JSR  LAMPARA_1
 EE46 [05] CDEF11     245             JSR  ESTADO_1
 EE49 [02] A6C0       246             LDA  #%11000000           ;SET DDRAM 
                                     $40. Va a la posicion 0 de la segunda fila
 EE4B [05] CDEF21     247             JSR  LAMPARA_2
 EE4E [05] CDEF75     248             JSR  ESTADO_2
 EE51 [02] A694       249             LDA  #%10010100           ;SET DDRAM 
                                     $14. Va a la posicion 0 de la tercera fila
 EE53 [05] CDEF85     250             JSR  LAMPARA_3
 EE56 [05] CDEFD9     251             JSR  ESTADO_3
 EE59 [02] A6D4       252             LDA  #%11010100           ;SET DDRAM 
                                      $54. Va a la posicion 0 de la cuarta fila
 EE5B [05] CDEFE9     253             JSR  LAMPARA_4
 EE5E [05] CDF03D     254             JSR  ESTADO_4
 EE61 [05] CDF0EF     255             JSR  RETARDO
 EE64 [05] CDF0EF     256             JSR  RETARDO
 EE67 [03] 20D3       257             bra  SALUDO
                      258  ****************************************************
                             **************************************************
                                                           ********************


LCD PARA DIPSWITCH.asm   Assembled with CASM08Z  10/04/2014  06:00:11 p.m.  PAGE 7



                      259  ESCRIBE_IR:                  ;SUBRUTINA QUE SIRVE 
                                      PARA MANDARLE INSTRUCCIONES AL MODULO LCD
 EE69 [04] 1900       260             BCLR  RS,PTA
 EE6B [04] 1A00       261             BSET  E,PTA
 EE6D [03] B780       262             STA   CHAR
 EE6F [02] A4F0       263             AND   #$F0
 EE71 [03] B701       264             STA   PTB
 EE73 [05] CDF105     265             JSR   DEMORA100
 EE76 [04] 1B00       266             BCLR  E,PTA
 EE78 [03] 3F01       267             CLR   PTB
 EE7A [05] CDF105     268             JSR   DEMORA100
 EE7D [04] 1A00       269             BSET  E,PTA
 EE7F [03] B680       270             LDA   CHAR
 EE81 [03] 62         271             NSA
 EE82 [02] A4F0       272             AND   #$F0
 EE84 [03] B701       273             STA   PTB
 EE86 [05] CDF105     274             JSR   DEMORA100
 EE89 [04] 1B00       275             BCLR  E,PTA
 EE8B [05] CDF105     276             JSR   DEMORA100
 EE8E [03] 3F01       277             CLR   PORTB
 EE90 [04] 1900       278             BCLR  RS,PTA
 EE92 [04] 81         279             RTS
                      280  ****************************************************
                             **************************************************
                                                           ********************
                      281  ESCRIBE_DR:                  ;SUBRUTINA QUE SIRVE 
                                 PARA MANDARLE DATOS (CARACTERES) AL MODULO LCD
 EE93 [04] 1800       282             BSET  RS,PTA
 EE95 [04] 1A00       283             BSET  E,PTA
 EE97 [03] B780       284             STA   CHAR
 EE99 [02] A4F0       285             AND   #$F0
 EE9B [03] B701       286             STA   PTB
 EE9D [05] CDF105     287             JSR   DEMORA100
 EEA0 [04] 1B00       288             BCLR  E,PTA
 EEA2 [03] 3F01       289             CLR   PTB
 EEA4 [05] CDF105     290             JSR   DEMORA100
 EEA7 [04] 1A00       291             BSET  E,PTA
 EEA9 [03] B680       292             LDA   CHAR
 EEAB [03] 62         293             NSA
 EEAC [02] A4F0       294             AND   #$F0
 EEAE [03] B701       295             STA   PORTB
 EEB0 [05] CDF105     296             JSR   DEMORA100
 EEB3 [04] 1B00       297             BCLR  E,PTA
 EEB5 [05] CDF105     298             JSR   DEMORA100
 EEB8 [03] 3F01       299             CLR   PORTB
 EEBA [04] 1900       300             BCLR  RS,PTA
 EEBC [04] 81         301             RTS
                      302  ****************************************************
                             **************************************************
                                                           ********************
                      303  LAMPARA_1
 EEBD [05] CDEE69     304             JSR  ESCRIBE_IR
 EEC0 [02] AE12       305             LDX  #$12
 EEC2 [04] D6F10D     306             LDA  TABLA,X   ;------------;L
 EEC5 [05] CDEE93     307             JSR  ESCRIBE_DR
                      308  
 EEC8 [02] AE14       309             LDX  #$14
 EECA [04] D6F10D     310             LDA  TABLA,X   ;------------;a


LCD PARA DIPSWITCH.asm   Assembled with CASM08Z  10/04/2014  06:00:11 p.m.  PAGE 8



 EECD [05] CDEE93     311             JSR  ESCRIBE_DR
                      312  
 EED0 [02] AE2D       313             LDX  #$2D
 EED2 [04] D6F10D     314             LDA  TABLA,X   ;------------;m
 EED5 [05] CDEE93     315             JSR  ESCRIBE_DR
                      316  
 EED8 [02] AE1B       317             LDX  #$1B
 EEDA [04] D6F10D     318             LDA  TABLA,X   ;------------;p
 EEDD [05] CDEE93     319             JSR  ESCRIBE_DR
                      320  
 EEE0 [02] AE14       321             LDX  #$14
 EEE2 [04] D6F10D     322             LDA  TABLA,X   ;------------;a
 EEE5 [05] CDEE93     323             JSR  ESCRIBE_DR
                      324  
 EEE8 [02] AE1C       325             LDX  #$1C
 EEEA [04] D6F10D     326             LDA  TABLA,X   ;------------;r
 EEED [05] CDEE93     327             JSR  ESCRIBE_DR
                      328  
 EEF0 [02] AE14       329             LDX  #$14
 EEF2 [04] D6F10D     330             LDA  TABLA,X   ;------------;a
 EEF5 [05] CDEE93     331             JSR  ESCRIBE_DR
                      332  
 EEF8 [02] AE24       333             LDX  #$24
 EEFA [04] D6F10D     334             LDA  TABLA,X   ;------------;espacio
 EEFD [05] CDEE93     335             JSR  ESCRIBE_DR
                      336  
 EF00 [02] AE01       337             LDX  #$01
 EF02 [04] D6F10D     338             LDA  TABLA,X   ;------------;nro 1
 EF05 [05] CDEE93     339             JSR  ESCRIBE_DR
                      340  
 EF08 [02] AE27       341             LDX  #$27
 EF0A [04] D6F10D     342             LDA  TABLA,X   ;------------;dos puntos
 EF0D [05] CDEE93     343             JSR  ESCRIBE_DR             ;termina 
                             siempre con este salto, sino borra la ultima letra
 EF10 [04] 81         344             RTS
                      345  ESTADO_1
 EF11 [05] 000005     346             brset IN_1,PORTA,enc1           ;Si hay 
                                               un 1 salta a la sub funcion enc1
 EF14 [01] 9D         347             nop
 EF15 [05] 010005     348             brclr IN_1,PORTA,apa1           ;Si hay 
                                               un 0 salta a la sub funcion apa1
 EF18 [04] 81         349             rts
                      350  enc1
 EF19 [05] CDF04D     351             JSR  ENCENDIDA
 EF1C [04] 81         352             RTS
                      353  apa1
 EF1D [05] CDF09E     354             JSR  APAGADA
 EF20 [04] 81         355             RTS
                      356  
                      357  LAMPARA_2
 EF21 [05] CDEE69     358             JSR  ESCRIBE_IR
 EF24 [02] AE12       359             LDX  #$12
 EF26 [04] D6F10D     360             LDA  TABLA,X   ;------------;L
 EF29 [05] CDEE93     361             JSR  ESCRIBE_DR
                      362  
 EF2C [02] AE14       363             LDX  #$14
 EF2E [04] D6F10D     364             LDA  TABLA,X   ;------------;a
 EF31 [05] CDEE93     365             JSR  ESCRIBE_DR


LCD PARA DIPSWITCH.asm   Assembled with CASM08Z  10/04/2014  06:00:11 p.m.  PAGE 9



                      366  
 EF34 [02] AE2D       367             LDX  #$2D
 EF36 [04] D6F10D     368             LDA  TABLA,X   ;------------;m
 EF39 [05] CDEE93     369             JSR  ESCRIBE_DR
                      370  
 EF3C [02] AE1B       371             LDX  #$1B
 EF3E [04] D6F10D     372             LDA  TABLA,X   ;------------;p
 EF41 [05] CDEE93     373             JSR  ESCRIBE_DR
                      374  
 EF44 [02] AE14       375             LDX  #$14
 EF46 [04] D6F10D     376             LDA  TABLA,X   ;------------;a
 EF49 [05] CDEE93     377             JSR  ESCRIBE_DR
                      378  
 EF4C [02] AE1C       379             LDX  #$1C
 EF4E [04] D6F10D     380             LDA  TABLA,X   ;------------;r
 EF51 [05] CDEE93     381             JSR  ESCRIBE_DR
                      382  
 EF54 [02] AE14       383             LDX  #$14
 EF56 [04] D6F10D     384             LDA  TABLA,X   ;------------;a
 EF59 [05] CDEE93     385             JSR  ESCRIBE_DR
                      386  
 EF5C [02] AE24       387             LDX  #$24
 EF5E [04] D6F10D     388             LDA  TABLA,X   ;------------;espacio
 EF61 [05] CDEE93     389             JSR  ESCRIBE_DR
                      390  
 EF64 [02] AE02       391             LDX  #$02
 EF66 [04] D6F10D     392             LDA  TABLA,X   ;------------;nro 2
 EF69 [05] CDEE93     393             JSR  ESCRIBE_DR
                      394  
 EF6C [02] AE27       395             LDX  #$27
 EF6E [04] D6F10D     396             LDA  TABLA,X   ;------------;dos puntos
 EF71 [05] CDEE93     397             JSR  ESCRIBE_DR
 EF74 [04] 81         398             RTS
                      399  
                      400  ESTADO_2
 EF75 [05] 020005     401             brset IN_2,PORTA,enc2           ;Si hay 
                                               un 1 salta a la sub funcion enc1
 EF78 [01] 9D         402             nop
 EF79 [05] 030005     403             brclr IN_2,PORTA,apa2           ;Si hay 
                                               un 0 salta a la sub funcion apa1
 EF7C [04] 81         404             rts
                      405  enc2
 EF7D [05] CDF04D     406             JSR  ENCENDIDA
 EF80 [04] 81         407             RTS
                      408  apa2
 EF81 [05] CDF09E     409             JSR  APAGADA
 EF84 [04] 81         410             RTS
                      411  
                      412  LAMPARA_3
 EF85 [05] CDEE69     413             JSR  ESCRIBE_IR
 EF88 [02] AE12       414             LDX  #$12
 EF8A [04] D6F10D     415             LDA  TABLA,X   ;------------;L
 EF8D [05] CDEE93     416             JSR  ESCRIBE_DR
                      417  
 EF90 [02] AE14       418             LDX  #$14
 EF92 [04] D6F10D     419             LDA  TABLA,X   ;------------;a
 EF95 [05] CDEE93     420             JSR  ESCRIBE_DR
                      421  


LCD PARA DIPSWITCH.asm   Assembled with CASM08Z  10/04/2014  06:00:11 p.m.  PAGE 10



 EF98 [02] AE2D       422             LDX  #$2D
 EF9A [04] D6F10D     423             LDA  TABLA,X   ;------------;m
 EF9D [05] CDEE93     424             JSR  ESCRIBE_DR
                      425  
 EFA0 [02] AE1B       426             LDX  #$1B
 EFA2 [04] D6F10D     427             LDA  TABLA,X   ;------------;p
 EFA5 [05] CDEE93     428             JSR  ESCRIBE_DR
                      429  
 EFA8 [02] AE14       430             LDX  #$14
 EFAA [04] D6F10D     431             LDA  TABLA,X   ;------------;a
 EFAD [05] CDEE93     432             JSR  ESCRIBE_DR
                      433  
 EFB0 [02] AE1C       434             LDX  #$1C
 EFB2 [04] D6F10D     435             LDA  TABLA,X   ;------------;r
 EFB5 [05] CDEE93     436             JSR  ESCRIBE_DR
                      437  
 EFB8 [02] AE14       438             LDX  #$14
 EFBA [04] D6F10D     439             LDA  TABLA,X   ;------------;a
 EFBD [05] CDEE93     440             JSR  ESCRIBE_DR
                      441  
 EFC0 [02] AE24       442             LDX  #$24
 EFC2 [04] D6F10D     443             LDA  TABLA,X   ;------------;espacio
 EFC5 [05] CDEE93     444             JSR  ESCRIBE_DR
                      445  
 EFC8 [02] AE03       446             LDX  #$03
 EFCA [04] D6F10D     447             LDA  TABLA,X   ;------------;nro 3
 EFCD [05] CDEE93     448             JSR  ESCRIBE_DR
                      449  
 EFD0 [02] AE27       450             LDX  #$27
 EFD2 [04] D6F10D     451             LDA  TABLA,X   ;------------;dos puntos
 EFD5 [05] CDEE93     452             JSR  ESCRIBE_DR
 EFD8 [04] 81         453             RTS
                      454  
                      455  ESTADO_3
 EFD9 [05] 040005     456             brset IN_3,PORTA,enc3           ;Si hay 
                                               un 1 salta a la sub funcion enc1
 EFDC [01] 9D         457             nop
 EFDD [05] 050005     458             brclr IN_3,PORTA,apa3           ;Si hay 
                                               un 0 salta a la sub funcion apa1
 EFE0 [04] 81         459             rts
                      460  enc3
 EFE1 [05] CDF04D     461             JSR  ENCENDIDA
 EFE4 [04] 81         462             RTS
                      463  apa3
 EFE5 [05] CDF09E     464             JSR  APAGADA
 EFE8 [04] 81         465             RTS
                      466  
                      467  LAMPARA_4
 EFE9 [05] CDEE69     468             JSR  ESCRIBE_IR
 EFEC [02] AE12       469             LDX  #$12
 EFEE [04] D6F10D     470             LDA  TABLA,X   ;------------;L
 EFF1 [05] CDEE93     471             JSR  ESCRIBE_DR
                      472  
 EFF4 [02] AE14       473             LDX  #$14
 EFF6 [04] D6F10D     474             LDA  TABLA,X   ;------------;a
 EFF9 [05] CDEE93     475             JSR  ESCRIBE_DR
                      476  
 EFFC [02] AE2D       477             LDX  #$2D


LCD PARA DIPSWITCH.asm   Assembled with CASM08Z  10/04/2014  06:00:11 p.m.  PAGE 11



 EFFE [04] D6F10D     478             LDA  TABLA,X   ;------------;m
 F001 [05] CDEE93     479             JSR  ESCRIBE_DR
                      480  
 F004 [02] AE1B       481             LDX  #$1B
 F006 [04] D6F10D     482             LDA  TABLA,X   ;------------;p
 F009 [05] CDEE93     483             JSR  ESCRIBE_DR
                      484  
 F00C [02] AE14       485             LDX  #$14
 F00E [04] D6F10D     486             LDA  TABLA,X   ;------------;a
 F011 [05] CDEE93     487             JSR  ESCRIBE_DR
                      488  
 F014 [02] AE1C       489             LDX  #$1C
 F016 [04] D6F10D     490             LDA  TABLA,X   ;------------;r
 F019 [05] CDEE93     491             JSR  ESCRIBE_DR
                      492  
 F01C [02] AE14       493             LDX  #$14
 F01E [04] D6F10D     494             LDA  TABLA,X   ;------------;a
 F021 [05] CDEE93     495             JSR  ESCRIBE_DR
                      496  
 F024 [02] AE24       497             LDX  #$24
 F026 [04] D6F10D     498             LDA  TABLA,X   ;------------;espacio
 F029 [05] CDEE93     499             JSR  ESCRIBE_DR
                      500  
 F02C [02] AE04       501             LDX  #$04
 F02E [04] D6F10D     502             LDA  TABLA,X   ;------------;nro 4
 F031 [05] CDEE93     503             JSR  ESCRIBE_DR
                      504  
 F034 [02] AE27       505             LDX  #$27
 F036 [04] D6F10D     506             LDA  TABLA,X   ;------------;dos puntos
 F039 [05] CDEE93     507             JSR  ESCRIBE_DR
 F03C [04] 81         508             RTS
                      509  
                      510  ESTADO_4
 F03D [05] 060005     511             brset IN_4,PORTA,enc4           ;Si hay 
                                               un 1 salta a la sub funcion enc1
 F040 [01] 9D         512             nop
 F041 [05] 070005     513             brclr IN_4,PORTA,apa4           ;Si hay 
                                               un 0 salta a la sub funcion apa1
 F044 [04] 81         514             rts
                      515  enc4
 F045 [05] CDF04D     516             JSR  ENCENDIDA
 F048 [04] 81         517             RTS
                      518  apa4
 F049 [05] CDF09E     519             JSR  APAGADA
 F04C [04] 81         520             RTS
                      521  ENCENDIDA
 F04D [02] AE24       522             LDX  #$24
 F04F [04] D6F10D     523             LDA  TABLA,X   ;------------;espacio
 F052 [05] CDEE93     524             JSR  ESCRIBE_DR
                      525  
 F055 [02] AE0F       526             LDX  #$0F
 F057 [04] D6F10D     527             LDA  TABLA,X   ;------------;E
 F05A [05] CDEE93     528             JSR  ESCRIBE_DR
                      529  
 F05D [02] AE28       530             LDX  #$28
 F05F [04] D6F10D     531             LDA  TABLA,X   ;------------;n
 F062 [05] CDEE93     532             JSR  ESCRIBE_DR
                      533  


LCD PARA DIPSWITCH.asm   Assembled with CASM08Z  10/04/2014  06:00:11 p.m.  PAGE 12



 F065 [02] AE15       534             LDX  #$15
 F067 [04] D6F10D     535             LDA  TABLA,X   ;------------;c
 F06A [05] CDEE93     536             JSR  ESCRIBE_DR
                      537  
 F06D [02] AE26       538             LDX  #$26
 F06F [04] D6F10D     539             LDA  TABLA,X   ;------------;e
 F072 [05] CDEE93     540             JSR  ESCRIBE_DR
                      541  
 F075 [02] AE28       542             LDX  #$28
 F077 [04] D6F10D     543             LDA  TABLA,X   ;------------;n
 F07A [05] CDEE93     544             JSR  ESCRIBE_DR
                      545  
 F07D [02] AE2A       546             LDX  #$2A
 F07F [04] D6F10D     547             LDA  TABLA,X   ;------------;d
 F082 [05] CDEE93     548             JSR  ESCRIBE_DR
                      549  
 F085 [02] AE17       550             LDX  #$17
 F087 [04] D6F10D     551             LDA  TABLA,X   ;------------;i
 F08A [05] CDEE93     552             JSR  ESCRIBE_DR
                      553  
 F08D [02] AE2A       554             LDX  #$2A
 F08F [04] D6F10D     555             LDA  TABLA,X   ;------------;d
 F092 [05] CDEE93     556             JSR  ESCRIBE_DR
                      557  
 F095 [02] AE14       558             LDX  #$14
 F097 [04] D6F10D     559             LDA  TABLA,X   ;------------;a
 F09A [05] CDEE93     560             JSR  ESCRIBE_DR
 F09D [04] 81         561             RTS
                      562  APAGADA
 F09E [02] AE24       563             LDX  #$24
 F0A0 [04] D6F10D     564             LDA  TABLA,X   ;------------;espacio
 F0A3 [05] CDEE93     565             JSR  ESCRIBE_DR
                      566  
 F0A6 [02] AE24       567             LDX  #$24
 F0A8 [04] D6F10D     568             LDA  TABLA,X   ;------------;espacio
 F0AB [05] CDEE93     569             JSR  ESCRIBE_DR
                      570  
 F0AE [02] AE2E       571             LDX  #$2E
 F0B0 [04] D6F10D     572             LDA  TABLA,X   ;------------;A
 F0B3 [05] CDEE93     573             JSR  ESCRIBE_DR
                      574  
 F0B6 [02] AE1B       575             LDX  #$1B
 F0B8 [04] D6F10D     576             LDA  TABLA,X   ;------------;p
 F0BB [05] CDEE93     577             JSR  ESCRIBE_DR
                      578  
 F0BE [02] AE14       579             LDX  #$14
 F0C0 [04] D6F10D     580             LDA  TABLA,X   ;------------;a
 F0C3 [05] CDEE93     581             JSR  ESCRIBE_DR
                      582  
 F0C6 [02] AE16       583             LDX  #$16
 F0C8 [04] D6F10D     584             LDA  TABLA,X   ;------------;g
 F0CB [05] CDEE93     585             JSR  ESCRIBE_DR
                      586  
 F0CE [02] AE14       587             LDX  #$14
 F0D0 [04] D6F10D     588             LDA  TABLA,X   ;------------;a
 F0D3 [05] CDEE93     589             JSR  ESCRIBE_DR
                      590  
 F0D6 [02] AE2A       591             LDX  #$2A


LCD PARA DIPSWITCH.asm   Assembled with CASM08Z  10/04/2014  06:00:11 p.m.  PAGE 13



 F0D8 [04] D6F10D     592             LDA  TABLA,X   ;------------;d
 F0DB [05] CDEE93     593             JSR  ESCRIBE_DR
                      594  
 F0DE [02] AE14       595             LDX  #$14
 F0E0 [04] D6F10D     596             LDA  TABLA,X   ;------------;a
 F0E3 [05] CDEE93     597             JSR  ESCRIBE_DR
                      598  
 F0E6 [02] AE24       599             LDX  #$24
 F0E8 [04] D6F10D     600             LDA  TABLA,X   ;------------;espacio
 F0EB [05] CDEE93     601             JSR  ESCRIBE_DR
 F0EE [04] 81         602             RTS
                      603  RETARDO
 F0EF [02] 87         604          PSHA
 F0F0 [02] 8B         605          PSHH
 F0F1 [02] 89         606          PSHX
 F0F2 [02] A6FF       607          LDA     #$FF
                      608  DELAY
 F0F4 [03] 4500EF     609          LDHX    #$00EF
                      610  LOOP1
 F0F7 [02] AFFF       611          AIX     #-1
 F0F9 [03] 650000     612          CPHX    #0
 F0FC [03] 26F9       613          BNE     LOOP1
 F0FE [01] 4A         614          DECA
 F0FF [03] 26F3       615          BNE     DELAY
 F101 [02] 88         616          PULX
 F102 [02] 8A         617          PULH
 F103 [02] 86         618          PULA
 F104 [04] 81         619          RTS
                      620  ****************************************************
                             **************************************************
                                                           ********************
                      621  DEMORA100:                        ;RUTINA QUE 
                                                    GENERA UNA DEMORA DE APROX.
 F105 [02] 87         622             PSHA
 F106 [02] A6FF       623             LDA  #$FF
                      624  RESTA3:
 F108 [01] 4A         625             DECA
 F109 [03] 26FD       626             BNE  RESTA3
                      627  
 F10B [02] 86         628             PULA
 F10C [04] 81         629             RTS
                      630  ****************************************************
                             **************************************************
                                                           ********************
                      631  TABLA:                                ;TABLA EN 
                                  DONDE SE DEFINEN LOS CARACTERES QUE SE USARAN
 F10D      30         632             DB  %00110000;0 X = $00
 F10E      31         633             DB  %00110001;1 X = $01
 F10F      32         634             DB  %00110010;2 X = $02
 F110      33         635             DB  %00110011;3 X = $03
 F111      34         636             DB  %00110100;4 X = $04
 F112      35         637             DB  %00110101;5 X = $05
 F113      36         638             DB  %00110110;6 X = $06
 F114      37         639             DB  %00110111;7 X = $07
 F115      38         640             DB  %00111000;8 X = $08
 F116      39         641             DB  %00111001;9 X = $09
 F117      50         642             DB  %01010000;P X = $0A
 F118      52         643             DB  %01010010;R X = $0B


LCD PARA DIPSWITCH.asm   Assembled with CASM08Z  10/04/2014  06:00:11 p.m.  PAGE 14



 F119      54         644             DB  %01010100;T X = $0C
 F11A      55         645             DB  %01010101;U X = $0D
 F11B      43         646             DB  %01000011;C X = $0E
 F11C      45         647             DB  %01000101;E X = $0F
 F11D      46         648             DB  %01000110;F X = $10
 F11E      48         649             DB  %01001000;H X = $11
 F11F      4C         650             DB  %01001100;L X = $12
 F120      4E         651             DB  %01001110;N X = $13
 F121      61         652             DB  %01100001;a X = $14
 F122      63         653             DB  %01100011;c X = $15
 F123      67         654             DB  %01100111;g X = $16
 F124      69         655             DB  %01101001;i X = $17
 F125      6A         656             DB  %01101010;j X = $18
 F126      6C         657             DB  %01101100;l X = $19
 F127      6F         658             DB  %01101111;o X = $1A
 F128      70         659             DB  %01110000;p X = $1B
 F129      72         660             DB  %01110010;r X = $1C
 F12A      73         661             DB  %01110011;s X = $1D
 F12B      75         662             DB  %01110101;u X = $1E
 F12C      2E         663             DB  %00101110;punto X = $1F
 F12D      2C         664             DB  %00101100;coma X = $20
 F12E      3F         665             DB  %00111111;pregunta X = $21
 F12F      3D         666             DB  %00111101;igual X = $22
 F130      00         667             DB  %00000000; mu X=$23
 F131      20         668             DB  %00100000;ESPACIO X=$24
 F132      01         669             DB  %00000001; Yaz X=$25
 F133      65         670             DB  %01100101;e  X = $26
 F134      3A         671             DB  %00111010;dos puntos X = $27
 F135      6E         672             DB  %01101110;n  X = $28
 F136      42         673             DB  %01000010;B  X = $29
 F137      64         674             DB  %01100100;d  X = $2A
 F138      4A         675             DB  %01001010;J  X = $2B
 F139      76         676             DB  %01110110;v  X = $2C
 F13A      6D         677             DB  %01101101;m  X = $2D
 F13B      41         678             DB  %01000001;A  X = $2E
                      679  ****************************************************
                             **************************************************
                                                           ********************
                      680  BOBO                       ;Rutina para los 
                                vectores no utilizados. Se pone "por las dudas"
 F13C [01] 9D         681             NOP
 F13D [07] 80         682             RTI
                      683  *************************************TABLA DE 
                             VECTORES******************************************
                                                      *************************
                      684  
 FFDE                 685             ORG  VECTORS
                      686  
 FFDE      F13C       687             DW   BOBO  ;FFDE-FFDF
 FFE0      F13C       688             DW   BOBO  ;FFE0-FFE1
 FFE2      F13C       689             DW   BOBO  ;FFE2-FFE3
 FFE4      F13C       690             DW   BOBO  ;FFE4-FFE5
 FFE6      F13C       691             DW   BOBO  ;FFE6-FFE7
 FFE8      F13C       692             DW   BOBO  ;FFE8-FFE9
 FFEA      F13C       693             DW   BOBO  ;FFEA-FFEB
 FFEC      F13C       694             DW   BOBO  ;FFEC-FFED
 FFEE      F13C       695             DW   BOBO  ;FFEE-FFEF
 FFF0      F13C       696             DW   BOBO  ;FFF0-FFF1


LCD PARA DIPSWITCH.asm   Assembled with CASM08Z  10/04/2014  06:00:11 p.m.  PAGE 15



 FFF2      F13C       697             DW   BOBO  ;FFF2-FFF3
 FFF4      F13C       698             DW   BOBO  ;FFF4-FFF5
 FFF6      F13C       699             DW   BOBO  ;FFF6-FFF7
 FFF8      F13C       700             DW   BOBO  ;FFFF8-FFF9
 FFFA      F13C       701             DW   BOBO  ;FFFA-FFFB
 FFFC      F13C       702             DW   BOBO  ;FFFC-FFFD
 FFFE      EE00       703             DW   START ;FFFE-FFFF
                      704  ****************************************************
                             **************************************************
                                                           ********************
                      705  END
                      706  ****************************************************
                             **************************************************
                                                           ********************
                      707  
                      708  
                      709  
                      710  
                      711  
                      712  
                      713  
                      714  
                      715  
                      716  
                      717  
                      718  
                      719  
                      720  
                      721  
                      722   

 Symbol Table 

ACK              0002
ACKK             0002
ADCO             0005
ADICLK           003F
ADRH             003D
ADRL             003E
ADSCR            003C
AIEN             0006
APA1             EF1D
APA2             EF81
APA3             EFE5
APA4             F049
APAGADA          F09E
BCFE             0007
BDCOP            0000
BFCR             FE03
BOBO             F13C
BRKAR            FE02
BRKH             FE09
BRKL             FE0A
BRKSCR           FE0B
BSR              FE00
CH0F             0007
CH0IE            0006
CH0MAX           0000


LCD PARA DIPSWITCH.asm   Assembled with CASM08Z  10/04/2014  06:00:11 p.m.  PAGE 16



CH1F             0007
CH1IE            0006
CH1MAX           0000
CHAR             0080
COCO             0007
CONFIG1          001F
CONFIG2          001E
COP              0005
COPCTL           FFFF
DDRA             0004
DDRB             0005
DELAY            F0F4
DELNUS           280C
DEMORA100        F105
E                0005
ECFS0            0002
ECFS1            0003
ECGON            0001
ECGST            0000
ELS0A            0002
ELS0B            0003
ELS1A            0002
ELS1B            0003
ENC1             EF19
ENC2             EF7D
ENC3             EFE1
ENC4             F045
ENCENDIDA        F04D
END              0000
ERARNGE          2806
ESCRIBE_DR       EE93
ESCRIBE_IR       EE69
ESTADO_1         EF11
ESTADO_2         EF75
ESTADO_3         EFD9
ESTADO_4         F03D
FLBPR            FFBE
FLCR             FE08
GETBYTE          2800
ICFS0            0004
ICFS1            0005
ILAD             0003
ILOP             0004
IMASK            0001
IMASKK           0001
INICIO_LCD       EE1E
INT1             FE04
INT2             FE05
INT3             FE06
INTSCR           001D
IN_1             0000
IN_2             0001
IN_3             0002
IN_4             0003
IOSCTRM          FFC0
IRQF             0003
KBIER            001B
KBSCR            001A


LCD PARA DIPSWITCH.asm   Assembled with CASM08Z  10/04/2014  06:00:11 p.m.  PAGE 17



KEYF             0003
LAMPARA_1        EEBD
LAMPARA_2        EF21
LAMPARA_3        EF85
LAMPARA_4        EFE9
LOOP1            F0F7
LVI              0001
LVISR            FE0C
MODE             0000
MODEK            0000
MODRST           0002
MS0A             0004
MS0B             0005
MS1A             0004
MS1B             0005
OSCOPT0          0006
OSCOPT1          0007
OSCSC            0036
OSCSTAT          0036
OSCTRIM          0038
PIN              0006
POR              0007
PORTA            0000
PORTB            0001
PRGRNGE          2809
PTA              0000
PTAPUE           000B
PTB              0001
PTBPUE           000C
RAM_START        0080
RDVRRNG          2803
RESTA3           F108
RETARDO          F0EF
ROM_START        EE00
RS               0004
SALUDO           EE3C
SBSW             0001
SRSR             FE01
START            EE00
TABLA            F10D
TCH0H            0026
TCH0L            0027
TCH1H            0029
TCH1L            002A
TCNTH            0021
TCNTL            0022
TMODH            0023
TMODL            0024
TOF              0007
TOIE             0006
TOV0             0001
TOV1             0001
TRST             0004
TSC              0020
TSC0             0025
TSC1             0028
TSTOP            0005
VECTORS          FFDE
